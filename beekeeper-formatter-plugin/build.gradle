plugins {
    id 'groovy'
    id 'java-gradle-plugin'
    id 'maven-publish'
    id 'com.gradle.plugin-publish'
}

gradlePlugin {
    plugins {
        formatterPlugin {
            id = "${group}"
            implementationClass = 'io.beekeeper.formatting.FormatterPlugin'
            displayName = 'Beekeeper Formatter Plugin'
            description = 'A plugin that helps keeping the code of your project clean and well formatted.'
        }
    }
}

repositories {
    mavenCentral()
}


dependencies {
    implementation group: 'com.diffplug.spotless', name: 'spotless-plugin-gradle', version: '3.17.0'
    testImplementation "org.spockframework:spock-core:1.2-groovy-2.5"
}

// Include Resources in the jar
sourceSets.main.resources.srcDirs += "src/main/resources"
sourceSets.main.resources.srcDirs += "${project.rootDir}/coding-guidelines/"

// MAVEN PACKAGE PUBLISHING
publishing {
    repositories {
        mavenLocal()
    }
    publications {
        maven(MavenPublication) {
            groupId "${group}"
            artifactId "${artifactId}"
            version "${version}"

            from components.java
        }
    }
}

// GRADLE PLUGIN PUBLISHING
pluginBundle {
    //TODO: vcsUrl = '<uri to project source repository>'
    tags = ['format', 'clean', 'indent', 'spotless', 'beekeeper']
}